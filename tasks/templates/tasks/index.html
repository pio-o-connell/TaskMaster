{% extends 'tasks/base.html' %}
{% load static %}

{% block content %}
  <div class="row">
    <div class="col-12 mb-3 d-flex justify-content-between align-items-center">
      <h1 class="m-0">Taskmaster</h1>
      <a class="btn btn-primary" href="/admin/tasks/task/add/">Add Task</a>
    </div>
  </div>

  <div class="row">
    <div class="col-12 col-md-6 mb-4">
      <h3>To do</h3>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-light">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Due Date</th>
              <th scope="col">Category</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for task in upcoming_tasks %}
              <tr>
                <td>{{ task.title }}</td>
                <td>{% if task.due_date %}{{ task.due_date }}{% else %}-{% endif %}</td>
                <td>{{ task.category }}</td>
                <td>
                  <a href="#" class="text-success me-2" title="Mark completed"><i class="fa-solid fa-check fa-fw"></i></a>
                  <a href="#" class="text-primary me-2" title="Edit"><i class="fa-solid fa-pen-to-square fa-fw"></i></a>
                  <a href="#" class="text-danger" title="Delete"><i class="fa-solid fa-trash fa-fw"></i></a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="4" class="text-muted">No tasks to do. Use the Admin to add tasks.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-12 col-md-6 mb-4">
      <h3>Done</h3>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-light">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Due Date</th>
              <th scope="col">Category</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for task in completed_tasks %}
              <tr>
                <td>{{ task.title }}</td>
                <td>{% if task.due_date %}{{ task.due_date }}{% else %}-{% endif %}</td>
                <td>{{ task.category }}</td>
                <td>
                  <a href="#" class="text-secondary me-2" title="Reopen"><i class="fa-solid fa-rotate-left fa-fw"></i></a>
                  <a href="#" class="text-primary me-2" title="Edit"><i class="fa-solid fa-pen-to-square fa-fw"></i></a>
                  <a href="#" class="text-danger" title="Delete"><i class="fa-solid fa-trash fa-fw"></i></a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="4" class="text-muted">No completed tasks yet.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

{% endblock %}
